id: https://w3id.org/GHGA-Metadata-Schema
name: GHGA-Metadata-Schema
description: >-
  The metadata schema for the German Human Genome-Phenome Archive (GHGA).
version: 0.0.1

imports:
- linkml:types

prefixes:
  linkml: https://w3id.org/linkml/
  GHGA: https://w3id.org/GHGA/
  SIO: http://semanticscience.org/resource/SIO_
  biolink: https://w3id.org/biolink/vocab/
  EFO: http://www.ebi.ac.uk/efo/EFO_

default_prefix: GHGA

default_curi_maps:
  - obo_context
  - idot_context
  - semweb_context

classes:

  named thing:
    description: >-
      A databased entity, concept or class. This is a generic class that is the root
      of all the other classes.
    slots:
      - id

  attribute:
    description: >-
      A key/value pair that further characterizes an entity.
    slots:
      - key
      - key type
      - value
      - value type
    slot_usage:
      key:
        required: true
      value:
        required: true

  study:
    is_a: research activity
    description: >-
      Studies are experimental investigations of a particular phenomenon. It involves a
      detailed examination and analysis of a subject to learn more about the phenomenon
      being studied.
    slots:
      - id
      - title
      - type
      - name
      - abstract
      - publications
      - attributes
    slot_usage:
      title:
        description: >-
          A descriptive title for the study.
        required: true
      type:
        description: >-
          The study type. For example, "Cancer Genomics", "Epigenetics", "Exome Sequencing".
        required: true
      name:
        description: >-
          A short name for the study.
      abstract:
        description: >-
          The study abstract that describes the goals. Can also hold abstract
          from a publication related to the study.
        required: true
      publications:
        description: >-
          The publication(s) associated with this study.
        multivalued: true
        range: publication
      attributes:
        description: >-
          Custom key/value pairs that further characterizes the study.
        multivalued: true
        range: attribute

  experiment:
    is_a: research activity
    description: >-
      An experiment is an investigation that consists of a coordinated set of
      actions and observations designed to generate data with the goal of verifying,
      falsifying, or establishing the validity of a hypothesis.
    exact_mappings:
      - SIO:000994
      - NCIT:C42790
    slots:
      - id
      - name
      - description
      - has study
      - instrument model
      - has library
      - has sample
      - has protocol
    slot_usage:
      name:
        description: >-
          Name for the experiment.
        required: true
      description:
        description: >-
          A description for the experiment.
      has study:
        description: >-
          The study associated with this experiment.
        required: true
        range: study
      instrument model:
        description: >-
          The instrument model.
        # TODO: need to model this properly
        required: true
      has library:
        description: >-
          The library associated with this experiment.
        required: true
        range: library
      has sample:
        description: >-
          The sample associated with this experiment.
        required: true
        range: sample
      has protocol:
        description: >-
          The protocol associated with this experiment.
        range: protocol

  library:
    is_a: material entity
    description: >-
      A library that is used in an experiment protocol to generate the input
      for an instrument.
    slots:
      - id
      - name
      - layout
      - source
      - selection
      - strategy
      - construction protocol
    slot_usage:
      name:
        description: >-
          Name for the library.
      layout:
        required: true
      source:
        required: true
      selection:
        required: true
      strategy:
        required: true

  sample:
    is_a: biological entity
    description: >-
      A sample is a limited quantity of something to be used for testing, analysis,
      inspection, investigation, demonstration, or trial use. This could be either
      an individual, or sets of individuals from a population, or a portion of a
      substance like an isolate or tissue.
    aliases: ['biosample']
    exact_mappings:
      - SIO:001050
      - biolink:MaterialSample
    slots:
      - id
      - name
      - type
      - description
      - subject
      - biosample accession # TODO: model as xref
      - has anatomical site
      - has cell line
      - geographical region
      - has disease of phenotypic feature
      - files
    slot_usage:
      name:
        description: >-
          Name of the sample.
      type:
        description: >-
          Type of sample: 'Case' or 'Control'.
#        range: case_control_enum
      description:
        description: >-
          Brief description of a sample.
      subject:
        required: true
        range: individual
      biosample accession:
        description: >-
          BioSample accession. For example, if the Sample is from EBI BioSamples.
      has anatomical site:
        description:
          Anatomical site from which the sample was retrieved.
        range: anatomical entity
        broad_mappings:
          - EFO:0000635

      has cell line:
        description:
          Type of cell line that was used.
        range: cell line
      geographical region:
        description:
          A geographical region associated with the sample.
      has disease of phenotypic feature:
        description: >-
          The phenotype or disease associated with the individual from which
          the sample was taken.
        required: true
        range: disease or phenotypic feature
        narrow_mappings: 
          - EFO:0000651
      files:
        description: >-
          One or more files that are linked to this Sample.
        multivalued: true
        range: file
        required: true

  protocol:
    is_a: information content entity
    aliases: ['library protocol']
    description: >-
      A plan specification which has sufficient level of detail and quantitative information
      to communicate it between investigation agents, so that different investigation agents
      will reliably be able to independently reproduce the process.
    exact_mappings:
      - OBI:0000272
      - NCIT:C41111

  individual:
      is_a: person
      aliases: ['subject', 'patient']
      slots:
        - id
        - name
        - gender
        - sex
        - age
      slot_usage:
        gender:
          description: Gender of an individual.
          required: true
#          range: gender_enum
        sex:
          description: Biological Sex of an individual
          required: true
#          range: sex_enum
        age:
          description: Age of an individual.

  file:
    is_a: information content entity
    aliases: ['file object']
    slots:
      - id
      - name
      - format
      - type
      - size
      - md5sum
      - file_index
      - category
    slot_usage:
      format:
        description: >-
          The format of the file: BAM, SAM, CRAM, BAI, etc.
      type:
        description: >-
          The file type: Aligned Reads, Unaligned Reads, etc.
      size:
        description: >-
          The file size in bytes.
      md5sum:
        description: >-
          The MD5 Checksum for the file.
      file_index:
        description: >-
          The index for this file. Commonly for BAM/VCF files.
      category:
        description: >-
          The category for this file: Whole Genome Sequencing, Whole Exome Sequencing, etc.

  dataset:
    is_a: information content entity
    description: >-
      A dataset is a collection of files that represents data generated from a particular sample.
    exact_mappings:
      - SIO:000089
    slots:
      - id
      - title
      - description
      - type
      - files
      - has data access policy
      - has study
      - has experiment
      - has file
    slot_usage:
      title:
        required: true
      description:
        required: true
      type:
        required: true
      files:
        description: >-
          One or more files that collectively make this dataset.
        required: true
      has data access policy:
        description: >-
          The Data Access Policy that applies to this dataset.
        required: true
        range: data access policy
      has study:
        description: >-
          One or more studies that collectively are part of the dataset
        required: true
        range: study
      has experiment:
        description: >-
          One or more experiments that collectively are part of the dataset
        required: true
        range: experiment
      has file:
        description: >-
          One or more files that collectively are part of the dataset
        required: true
        range: file

  synthetic dataset:
    is_a: dataset
    description: >-
      A dataset that is built by combining one or more datasets.
    # Note: This is experimental

  processed dataset:
    is_a: dataset
    description: >-
      A dataset that is generated by processing an existing dataset.

  data access policy:
    is_a: information content entity
    description: >-
      A data access policy specifies under which circumstances, legal or otherwise,
      a user can have access to one or more datasets belonging to one or more studies.
    slots:
      - id
      - description
      - policy text
      - policy url
      - has data access committee
    slot_usage:
      description:
        description: >-
          A short description for the Data Access Policy.
        required: true
      policy text:
        required: true
      policy url:
        description: The URL for the policy, if available.
      has data access committee:
        description: The Data Access Committee linked to this policy.
        required: true
        range: data access committee

  data access committee:
    is_a: committee
    description: >-
      A group of members that are delegated to grant access to one or more datasets after ensuring the minimum criteria
      for data sharing has been met, and request for data use does not raise ethical and/or legal concerns.
    slots:
      - id
      - title
      - description
      - main contact
      - has members
    slot_usage:
      title:
        required: true
      main contact:
        description: >-
          The main contact for the data access committee.
        range: member
      has members:
        description: >-
          All the members that are part of this data access committee.
        multivalued: true
        range: member

  committee:
    is_a: named thing
    description: >-
      A group of people organized for a specific purpose.

  member:
    is_a: person
    description: >-
      Member of an organization or a committee.
    slots:
      - id
      - name
      - title
      - email
      - telephone
      - organization
    slot_usage:
      name:
        required: true
      telephone:
        required: true
      organization:
        required: true
      main contact:
        required: true

  publication:
    is_a: information content entity
    description: >-
      Represents a publication.
    slots:
      - id
      - title
    slot_usage:
      id:
        description: >-
          A PMID or DOI for the publication.

  research activity:
    is_a: activity
    description: >-
      A planned process executed in the performance of scientific research wherein
      systematic investigations are performed to establish facts and reach new conclusions
      about phenomena in the world.
    exact_mappings:
      - SEPIO:0000004
      - NCIT:C15429

  activity:
    is_a: named thing
    description: >-
      An activity is something that occurs over a period of time and acts upon or with entities;
      it may include consuming, processing, transforming, modifying, relocating, using, or
      generating entities.
    exact_mappings:
      - prov:Activity
      - http://purl.obolibrary.org/obo/NCIT_C43431

  anatomical entity:
    is_a: biological entity
    description: >-
      An anatomical entity is an object that is a structural part (material or immaterial)
      of a biological entity.
    exact_mappings:
      - UBERON:0001062

  cell line:
    is_a: biological entity
    description: >-
      A cultured cell population that represents a genetically stable and homogenous population
      of cultured cells that shares a common propagation history
    exact_mappings:
      - CLO:0000031
      - EFO:0000322
      - SIO:010054

  biological entity:
    is_a: named thing
    description: >-
      A biological entity is a heterogeneous substance that contains genomic material or
      is the product of a biological process.

  information content entity:
    is_a: named thing
    description: >-
      A generically dependent continuant that is about some thing.
    exact_mappings:
      - IAO:0000030

  disease or phenotypic feature:
    is_a: biological entity
    description: >-
      A disease or phenotypic feature.
    exact_mappings:
      - biolink:DiseaseOrPhenotypicFeature

  material entity:
    is_a: named thing
    description: >-
      A material entity is a physical entity that is spatially extended, exists as a
      whole at any point in time and has mass.
    exact_mappings:
      - SIO:000004

  person:
    is_a: named thing
    description: >-
      A member of the species Homo sapiens.
    exact_mappings:
      - NCIT:C25190
      - SIO:000498
      - prov:Person


slots:

  id:
    description: >-
      An identifier that uniquely represents an entity.
    identifier: true
    required: true

  name:
    description: >-
      The name for an entity.

  type:
    description: >-
      The type of an entity.
    # Note: Not to be confused with rdf:type

  title:
    description: >-
      The title that describes an entity.

  abstract:
    description: >-
      The abstract - a short blurb - associated with an entity.

  publications:
    description: >-
      The publications related to an entity.
    multivalued: true
    range: publication

  attributes:
    description: >-
      Key/value pairs corresponding to an entity.
    multivalued: true
    range: attribute

  description:
    description: >-
      Description of an entity.

  instrument model:
    description: >-
      The instrument on which the data was generated.

  has study:
    description: >-
      The study associated with an entity.
    range: study

  has library:
    description: >-
      The library associated with an entity.
    range: library

  has sample:
    description: >-
      The sample associated with an entity.
    range: sample

  has protocol:
    description: >-
      The protocol associated with an entity.
    range: protocol

  has experiment:
    description: >-
      The experiment associated with an entitiy.
    range: experiment

  has file:
    description: >-
      The file associated with an entitiy.
    range: file

  layout:
    description: >-
      The layout of the library. Whether it is single-end, paired-end.

  source:
    description: >-
      The source of the library. For example, Metagenome, Transcriptome, etc.

  selection:
    description: >-
      Library selection process. For example, random, cDNA, etc.

  strategy:
    description: >-
      Library strategy. For example, ChIP-Seq, RNA-Seq, DNA-Seq, etc.

  construction protocol:
    description: >-
      Description of how the library was constructed.

  subject:
    description: >-
      The subject/individual associated with an entity.
    range: individual

  biosample accession:
    description: >-
      BioSample accession. For example, if the Sample is from EBI BioSamples.

  has anatomical site:
    description: >-
      Anatomical site associated with an entity.
    range: anatomical entity

  has cell line:
    description: >-
      Cell line associated with an entity.
    range: cell line

  geographical region:
    description: >-
      The geographical region linked to an entity.

  has disease of phenotypic feature:
    description: >-
      Disease or phenotype that the entity is associated with.
    range: disease or phenotypic feature

  files:
    description: One or more files that are linked to an entity.
    multivalued: true
    range: file

  gender:
    description: >-
      The assemblage of properties that distinguish people on the basis
      of the societal role s expected for the two sexes. [NCI]
#    range: gender_enum

  sex:
    description: >-
      The assemblage of physical properties or qualities 
      by which male is distinguished from female.[NCI]
#    range: sex_enum

  age:
    description: >-
      The age of a person.
    range: integer

  format:
    description: >-
      The format of a file.

  size:
    description: >-
      The size of a file in bytes.

  md5sum:
    description: >-
      The MD5 Checksum for a file.

  file_index:
    description: >-
      The index file corresponding to the file.

  category:
    description: >-
      The file category.

  has data access policy:
    description: >-
      Data Access Policy associated with an entity.
    range: data access policy

  policy text:
    description: >-
      The complete text for the Data Access Policy.

  policy url:
    description: >-
      Alternative to pasting the Data Access Policy text.

  has data access committee:
    description: >-
      Data Access Committee associated with an entity.
    range: data access committee

  main contact:
    description: >-
      The person who is the main contact for a committee.
    range: member

  has members:
    description: >-
      The members associated with a committee.
    multivalued: true

  telephone:
    description: >-
      The telephone number associated with a person.

  organization:
    description: >-
      The organization associated with a person.

  email:
    description: >-
      Email of a person.

  key:
    description: >-
      The key of an attribute.

  key type:
    description: >-
      The semantic type for the key of an attribute.

  value:
    description: >-
      The value of an attribute

  value type:
    description:
      The semantic type for the value of an attribute.

#enums:
#  sex_enum:
#    description: sex
#    permissible_values:
#      "XX":
#        description: female
#      "XY":
#        description: male
#      "none":
#        description: unspecified
#
#  gender_enum:
#    description: gender
#    permissible_values:
#      "female":
#        description: female
#      "male":
#        description: male
#
#  case_control_enum:
#    description: Is sample case or control?
#    permissible_values:
#      "control":
#        description: Control sample
#      "case":
#        description: Case sample